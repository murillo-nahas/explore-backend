generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model State {
  id               String @id @default(uuid())
  name             String @unique 
  country          String @unique
  acronym          String 
  createdAt        DateTime @default(now()) @map("created_at")
  updatedAt        DateTime @default(now()) @map("updated_at")
  deletedAt        DateTime? @map("deleted_at")
  cities           City[]

  @@map("states")
}

model City {
  id              Int @id @default(autoincrement())
  name            String @map("city_name")
  acronym         String @map("city_acronym")
  zipCode         String @unique @db.VarChar(8) @map("zip_code")
  createdAt       DateTime @default(now()) @map("created_at")
  stateId         Int @map("state_id")
  places          Place[]

  state State @relation(fields: [stateId], references: [id], onDelete: Cascade)

  @@map("cities")
}

model Place {
  id                Int @id @default(autoincrement())
  name              String @map("place_name")
  description       String @map("place_description")
  googleMapsUrl     String @unique @map("google_maps_url")
  street            String
  number            Int
  district          String
  zipCode           String @unique @db.VarChar(8) @map("zip_code")
  cityId            Int @map("city_id")

  city City @relation(fields: [cityId], references: [id], onDelete: Cascade)

  @@map("places")
}